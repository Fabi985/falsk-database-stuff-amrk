{% extends "Base.HTML" %}
{% block title %}{{title}} Page{% endblock %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css')}}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='booking-style.css')}}">

<body>
    <h1><center>Booking page</center></h1>
    {% if current_user %}
    <div>
        <form 
        action="/search-user" 
        method="POST"
        role="search" 
        style="margin: 30px;">
            <input 
                type="search" 
                id="mySearch" 
                name="q" 
                size="35px" 
                placeholder="Search..." 
                autocomplete="off" />
            <button>Search</button>
        </form>
    </div>
    {% if search %}
            <div class="search-grid-container" >
                <h1><center>Theres currently no bookings with the term: "{{search}}"</center></h1>    
            </div>
    {% endif %}
        {% if booking_and_trainer_array %}
        <div class="search-grid-container" >
            {% for i in booking_and_trainer_array %}
            {% set Trainer_ID = i[1] %}
            {% set Booking_Name = i[2] %}
            {% set Booking_Details = i[3] %}
            {% set Booking_Availability = i[4] %}
            {% set Trainer_Username = i[6] %}
            {% set Trainer_PFP = i[7] %}
            {% set Trainer_fname = i[11] %}
            {% set Trainer_lname = i[12] %}
                <div class="search-card">
                    <div class="card-body search-item1 ">
                        {% if Booking_Availability == "Available" %}
                            <h3>{{Booking_Name}} - <span class="tag-available">Available</span></h3>
                        {% elif Booking_Availability == "Unavailable" %}
                            <h3>{{Booking_Name}} - <span class="tag-unavailable">Unavailable</span></h3>
                        {% endif %}
                        <div class="card" style="background-color: white; width: fit-content; border-radius: 100px; display: inline;">
                            <img src="../static/Profile_pics/{{Trainer_PFP}}" id="profile-pic">
                        </div>
                        <h4>{{Trainer_fname}} {{Trainer_lname}}</h4>
                        <h5>@{{Trainer_Username}}</h5>
                    </div>
                    <div class="card search-item2 " style="background-color: #596f62;">
                        <h4>Session Details</h4>
                        <p>{{Booking_Details}}</p>
                        {% if Booking_Availability == "Available" %}
                            <div style="margin-top: 50px;">
                                <button class="Booking-button">Book Session</button>
                            </div>
                        {% elif Booking_Availability == "Unavailable" %}
                            <div style="margin-top: 50px;">
                                <button disabled class="Booking-button">nuh uh</button>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
        {% elif bookings != False %}
        <div class="search-grid-container" >
            <h1><center>Theres currently no bookings!</center></h1>    
        </div>
        {% endif %}
    {% elif current_user == False %}
        <div class="search-grid-container" >
            <h1><center><span><a href="/Login">Log in or create an account</a></span> to be able to use bookings!</center></h1>    
        </div>
    {% else %}
        <div class="search-grid-container" >
            <h1><center><span><a href="/Login">Log in or create an account</a></span> to be able to use bookings!</center></h1>    
        </div>
    {% endif %}
</body>


{% endblock %}